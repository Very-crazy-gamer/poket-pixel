<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Download Zone</title>
<style>
:root{
  --bg:#07121a;
  --card: rgba(255,255,255,0.03);
  --muted9fb0c4;
  --accent:#06b6d4;
  --accent2:#7c3aed;
  --glass: rgba(255,255,255,0.035);
  --radius:14px;
  --tap:56px;
  --gap:10px;
}
*{box-sizing:border-box; -webkit-tap-highlight-color: transparent;}
html,body{height:100%; margin:0; font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial; background:linear-gradient(180deg,#061219 0%, #07121a 100%); color:#e8f6fb; display:flex; justify-content:center; align-items:center;}
.container {
  background: var(--card);
  padding: 20px;
  border-radius: var(--radius);
  backdrop-filter: blur(10px);
  border:1px solid rgba(255,255,255,0.05);
  display:flex; flex-direction:column; gap:15px; width:320px;
  box-shadow:0 8px 24px rgba(0,0,0,0.5);
}
h1 { font-size:18px; margin:0; color:var(--accent); text-align:center; }
.inputs label { font-weight:600; margin-bottom:5px; display:block; color:#fff; }
.inputs input {
  width:100%; padding:10px; border-radius:var(--radius); border:none;
  background:var(--glass); color:#e8f6fb; outline:none;
}
.buttons { display:flex; gap:10px; justify-content:center; margin-top:10px; }
button {
  flex:1; padding:10px; border-radius:var(--radius); border:none;
  background: linear-gradient(90deg,var(--accent),var(--accent2));
  color:#042029; font-weight:600; cursor:pointer; transition:0.3s;
}
button:hover { opacity:0.85; transform:translateY(-2px); }
#refImg { width:100%; max-height:300px; object-fit:contain; border-radius:var(--radius); border:1px solid rgba(255,255,255,0.05); display:none; margin-top:10px; }
</style>
</head>
<body>
  <div class="container">
    <h1>Poket Pixel â€” Download Zone</h1>
    <div class="inputs">
      <label for="fileName">File Name</label>
      <input type="text" id="fileName" value="pixel-art.png"/>
    </div>
    <div class="buttons">
      <button id="paste">Download</button>
      <button id="refToggle">Preview</button>
    </div>
    <img src="" id="refImg"/>
  </div>

<script>
const fileName = document.getElementById('fileName');
let prev = false;
const refImg = document.getElementById('refImg');

document.getElementById("paste").addEventListener("click", async () => {
  try {
    const text = await navigator.clipboard.readText();
    const a = document.createElement('a');
    a.href = text;
    a.download = fileName.value.trim();
    a.click(); 
  } catch (err) {
    console.error("Failed to read clipboard:", err);
    alert("Failed to read clipboard. Make sure you are on HTTPS or localhost and allowed permissions.");
  }
});

document.getElementById("refToggle").addEventListener("click", async () => {
  prev = !prev;
  if(prev){
    try {
      const text = await navigator.clipboard.readText();
      if(!text){return;}
      refImg.src = text;
      refImg.style.display = 'block';
    } catch (err) {
      console.error("Failed to read clipboard:", err);
      alert("Failed to read clipboard. Make sure you are on HTTPS or localhost and allowed permissions.");
    }
  } else {
    refImg.style.display = 'none';
  }
});
</script>
</body>
</html>
